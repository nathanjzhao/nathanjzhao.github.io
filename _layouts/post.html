---
layout: compress
---

{% include head.html %}

<main>

    {% include header.html %}

    {% if page.tags %}
    <nav style="margin-top: 1em; margin-bottom: 1em;">
        {% assign sorted_tags = page.tags | sort %}
        {% for tag in sorted_tags %}
        <a href="{{ 'tagged/' | relative_url }}{{ tag }}">#{{ tag }}</a>
        {% endfor %}
    </nav>
    {% endif %}

    {% include arrows.html %}

    <hr />

    <h1 style="margin-bottom: 0.5rem;">{{ page.title }}</h1>
    {% if page.excerpt %}<p class="subtitle" style="font-size: 1.1rem; color: #6b7280; margin: 0.75rem 0 1rem 0; line-height: 1.5; font-style: italic;">{{ page.excerpt }}</p>{% endif %}
    <p style="margin: 0.5rem 0 1.5rem 0;">{{ page.date | date: "%b %d, %Y" }}</p>
    
    <hr />

    <!-- Floating Table of Contents -->
    <nav id="floating-toc" class="floating-toc">
        <div class="toc-header">Contents</div>
        <div id="floating-toc-content"></div>
    </nav>

    <div id="blog-contents">
        {{ page.content }}
    </div>

    <style>
        .floating-toc {
            position: fixed;
            top: 100px;
            right: 20px;
            width: 250px;
            max-height: 70vh;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            display: none; /* Hidden by default, script will show it */
        }

        @media (prefers-color-scheme: dark) {
            .floating-toc {
                background: rgba(31, 41, 55, 0.95);
                border: 1px solid #4b5563;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            }

            .subtitle {
                color: #9ca3af !important;
            }
        }

        .floating-toc .toc-header {
            font-weight: 600;
            margin-bottom: 12px;
            color: #1f2937;
        }

        .floating-toc a {
            display: block;
            color: #6b7280;
            text-decoration: none;
            padding: 4px 8px;
            line-height: 1.4;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .floating-toc a:hover {
            color: #1f2937;
            background-color: #f3f4f6;
        }

        /* Hierarchical indentation */
        .floating-toc div[style*="margin-left: 0em"] a {
            font-weight: 500;
            color: #374151;
        }

        @media (prefers-color-scheme: dark) {
            .floating-toc .toc-header {
                color: #f9fafb;
            }

            .floating-toc a {
                color: #9ca3af;
            }

            .floating-toc a:hover {
                color: #f9fafb;
                background-color: #374151;
            }

            .floating-toc div[style*="margin-left: 0em"] a {
                color: #d1d5db;
            }
        }

        .floating-toc div[style*="margin-left: 1em"] a {
            font-size: 13px;
            padding-left: 16px;
        }

        .floating-toc div[style*="margin-left: 2em"] a {
            font-size: 12px;
            padding-left: 32px;
        }

        .floating-toc div[style*="margin-left: 3em"] a {
            font-size: 11px;
            padding-left: 48px;
        }

        /* Smooth scrolling for the page */
        html {
            scroll-behavior: smooth;
        }

        @media (max-width: 1200px) {
            .floating-toc {
                display: none !important;
            }
        }
    </style>

    <hr />

    {% include arrows.html %}

    {% if page.no_comments %}
    {% else %}
    {% if page.draft %}
    <div>Draft doesn't have comments enabled.</div>
    {% else %}
    <script src="https://utteranc.es/client.js" repo="nathanjzhao/nathanjzhao.github.io" issue-term="pathname"
        theme="github-light" crossorigin="anonymous" async></script>
    {% endif %}
    {% endif %}

</main>

{% include footer-post.html %}

</body>

</html>
